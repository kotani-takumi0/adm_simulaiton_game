<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Policy Game | äºˆç®—æ¨å®šãƒ‡ãƒ¢</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="app-light.css" />
  <script>
    const api = (path, init) => fetch(path, init).then(async r => {
      const text = await r.text();
      let data; try { data = JSON.parse(text); } catch { data = text; }
      if (!r.ok) {
        throw { status: r.status, data };
      }
      return data;
    });

    async function loadInfo() {
      const out = document.getElementById('info');
      out.textContent = 'loading...';
      try {
        const info = await api('/v1/budget/model_info');
        out.textContent = JSON.stringify(info, null, 2);
        const dim = info.x_dim;
        document.getElementById('dim').textContent = `x_dim=${dim}, items=${info.n_items}`;
      } catch (e) {
        out.textContent = `error: ${e.status} \n` + JSON.stringify(e.data, null, 2);
      }
    }

    function yen(n) {
      if (n === null || n === undefined || isNaN(n)) return '';
      try {
        const v = Math.round(Number(n));
        return v.toLocaleString('ja-JP');
      } catch {
        return String(n);
      }
    }

    async function predictText() {
      const hidden = document.getElementById('query_text');
      const fromHidden = hidden ? (hidden.value || '') : '';
      const fromInput = (document.getElementById('input_gaiyo')?.value || '');
      const t = (fromHidden || fromInput || '').trim();
      const out = document.getElementById('pred');
      out.textContent = 'predicting (text)...';
      if (!t) {
        out.textContent = 'å…¥åŠ›ãŒç©ºã§ã™ã€‚äº‹æ¥­ã®æ¦‚è¦ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
        return;
      }
      try {
        const res = await api('/v1/budget/predict', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query_text: t })
        });
        // Render pretty output (æ¨å®šå½“åˆäºˆç®—ã®ã¿)
        let html = '';
        html += `
<section class="summary-kpi-section">
  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="kpi-icon">ğŸ’°</div>
      <div class="kpi-content">
        <h3>æ¨å®šå½“åˆäºˆç®—</h3>
        <div class="kpi-value">${yen(res.estimate_initial)} å††</div>
      </div>
    </div>
  </div>
</section>`;
        // å®Ÿãƒ‡ãƒ¼ã‚¿ç¢ºèªãƒœã‚¿ãƒ³ã¯å³ãƒšã‚¤ãƒ³ã®å›ºå®šãƒœã‚¿ãƒ³ã‚’ä½¿ç”¨ï¼ˆã“ã“ã§ã¯è¿½åŠ ã—ãªã„ï¼‰
        
        html += '<br/>';
        html += '<div class="card-title" style="margin-top:8px">é¡ä¼¼äº‹æ¥­</div>';
        if (Array.isArray(res.topk) && res.topk.length) {
          html += '<div class="projects-list">';
          for (const r of res.topk) {
            const sim = Number(r.similarity ?? 0);
            const sim01 = Math.max(0, Math.min(1, (sim + 1) / 2));
            const simPct = (sim01*100).toFixed(0);
            const name = (r.name ?? '');
            html += `
              <div class=\"project-item${r.rank===1 ? ' top1' : ''}">
                <div class="project-header">
                  <span class="rank-badge">#${r.rank}</span>
                  <span class="project-name">${name}</span>
                </div>
                <div class="simbar"><div class="simbar-fill" style="width:${simPct}%"></div></div>
                <div class="project-rating">
                  <span class="sim">sim ${(sim).toFixed(3)} (${simPct}%)</span>
                  <span class="y0">å½“åˆ ${yen(r.initial_budget)}</span>
                </div>
              </div>`;
          }
          html += '</div>';
        } else {
          html += '<div class="muted">é¡ä¼¼äº‹æ¥­ã¯ã‚ã‚Šã¾ã›ã‚“</div>';
        }
        out.innerHTML = html;
        // Attach click handlers to similar project cards
        try {
          window.LAST_PRED = res;
          const cards = out.querySelectorAll('.project-item');
          cards.forEach((el, i) => {
            const bid = (res.topk && res.topk[i] && res.topk[i].budget_id) ? String(res.topk[i].budget_id) : '';
            el.dataset.bid = bid;
            if (bid) {
              el.style.cursor = 'pointer';
              el.addEventListener('click', () => openProjectDetail(el.dataset.bid));
            } else {
              el.title = 'IDãŒç„¡ã„ãŸã‚è©³ç´°ã‚’è¡¨ç¤ºã§ãã¾ã›ã‚“';
            }
          });
        } catch {}
      } catch (e) {
        out.textContent = `error: ${e.status} \n` + JSON.stringify(e.data, null, 2);
      }
    }

    async function startSession() {
      const out = document.getElementById('session');
      const metaOut = document.getElementById('start_events_meta');
      out.textContent = 'starting...';
      metaOut.innerHTML = '';
      try {
        const idsRaw = document.getElementById('event_ids_input').value.trim();
        let body = undefined;
        if (idsRaw) {
          const ids = idsRaw.split(',').map(s=>s.trim()).filter(Boolean);
          body = JSON.stringify({ event_ids: ids });
        }
        const s = await api('/v1/state/start', {
          method: 'POST', headers: body? { 'Content-Type': 'application/json' } : undefined, body
        });
        out.textContent = JSON.stringify(s, null, 2);
        document.getElementById('session_id').textContent = s.session_id;

        // Render chosen events' name and issue
        if (Array.isArray(s.events_meta) && s.events_meta.length) {
          let html = '<h3>é¸å®šã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§</h3>';
          html += '<table border="1" cellspacing="0" cellpadding="4"><tr>' +
                  '<th>äºˆç®—äº‹æ¥­ID</th><th>äº‹æ¥­å</th><th>ç¾çŠ¶ãƒ»èª²é¡Œ</th></tr>';
          for (const r of s.events_meta) {
            html += `<tr><td>${(r['äºˆç®—äº‹æ¥­ID'] ?? '')}</td>` +
                    `<td>${(r['äº‹æ¥­å'] ?? '')}</td>` +
                    `<td>${(r['ç¾çŠ¶ãƒ»èª²é¡Œ'] ?? '')}</td></tr>`;
          }
          html += '</table>';
          metaOut.innerHTML = html;
        }
      } catch (e) {
        out.textContent = `error: ${e.status}\n` + JSON.stringify(e.data, null, 2);
      }
    }

    async function nextEvent() {
      const sid = document.getElementById('session_id').textContent.trim();
      const out = document.getElementById('event');
      if (!sid) { alert('å…ˆã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ã—ã¦ãã ã•ã„'); return; }
      out.textContent = 'loading next event...';
      try {
        const url = `/v1/events/next?session_id=${encodeURIComponent(sid)}`;
        const ev = await api(url);
        out.textContent = JSON.stringify(ev, null, 2);
      } catch (e) {
        out.textContent = `error: ${e.status}\n` + JSON.stringify(e.data, null, 2);
      }
    }

    async function loadOverview() {
      const box = document.getElementById('overview_content');
      box.innerHTML = 'loading...';
      try {
        const m = await api('/v1/events/overview');
        let html = '';
        html += `<div class="headline">${m['äº‹æ¥­å'] ?? ''}</div>`;
        html += `<div><h3>èª²é¡Œï¼ˆç¾çŠ¶ãƒ»èª²é¡Œï¼‰</h3><div class="code">${(m['ç¾çŠ¶ãƒ»èª²é¡Œ'] ?? m['genjo_kadai'] ?? '').replace(/\n/g,'<br>')}</div></div>`;
        box.innerHTML = html;
      } catch (e) {
        box.innerHTML = `error: ${e.status}<br><pre class="code">${JSON.stringify(e.data, null, 2)}</pre>`;
      }
    }
    // ---- Overview schedule (random, no-repeat, 60 months) ----
    const S_KEY = 'pg_overview_schedule_v1';
    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
      }
      return arr;
    }
    async function initSchedule(){
      let state = null;
      try{ state = JSON.parse(localStorage.getItem(S_KEY) || 'null'); }catch{}
      if(state && Array.isArray(state.ids) && typeof state.idx==='number'){
        return state;
      }
      const ids = await api('/v1/events/ids');
      const ids60 = ids.slice(0, 60);
      shuffle(ids60);
      state = { ids: ids60, idx: 0 };
      localStorage.setItem(S_KEY, JSON.stringify(state));
      return state;
    }
    function saveSchedule(state){ localStorage.setItem(S_KEY, JSON.stringify(state)); }
    function idxToPeriod(idx){
      const year = Math.floor(idx/12) + 1;
      const month = (idx % 12) + 1;
      return {year, month};
    }
    async function renderOverview(state){
      const box = document.getElementById('overview_content');
      const btn = document.getElementById('btn_next_overview');
      const label = document.getElementById('period_label');
      const total = state.ids.length;
      if(state.idx >= total){
        btn.disabled = true;
        label.textContent = 'ã‚²ãƒ¼ãƒ çµ‚äº†';
        box.innerHTML = '<div class="muted">å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¡¨ç¤ºã—ã¾ã—ãŸ</div>';
        return;
      }
      const {year, month} = idxToPeriod(state.idx);
      label.textContent = `${year}å¹´ç›® ${month}æœˆ`;
      box.innerHTML = 'loading...';
      try{
        const id = state.ids[state.idx];
        const m = await api(`/v1/events/meta?budget_id=${encodeURIComponent(id)}`);
        const kadai = (m['ç¾çŠ¶ãƒ»èª²é¡Œ'] ?? m['genjo_kadai'] ?? '')
        let html = '';
        html += `<div class="headline">${m['äº‹æ¥­å'] ?? m['jigyo_mei'] ?? ''}</div>`;
        html += `<div><h3>èª²é¡Œï¼ˆç¾çŠ¶ãƒ»èª²é¡Œï¼‰</h3><div class="code">${kadai.replace(/\n/g,'<br>')}</div></div>`;
        box.innerHTML = html;
        box.dataset.kadai = kadai;
        box.dataset.gaiyo = '';
      }catch(e){
        box.innerHTML = `error: ${e.status}<br><pre class="code">${JSON.stringify(e.data, null, 2)}</pre>`;
      }
    }
    async function loadOverview(){
      // no-op on load; use server-driven flow via startGame/nextEventServer
      const box = document.getElementById('overview_content');
      box.innerHTML = '<span class="muted">ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã€Œã‚²ãƒ¼ãƒ é–‹å§‹ã€â†’ã€Œä»Šæœˆã®äº‹æ¥­ã‚’å–å¾—ã€ã‚’ä½¿ã£ã¦ãã ã•ã„</span>';
    }
    async function nextOverview(){ /* deprecated */ }

    async function startGame(){
      try {
        const s = await api('/v1/state/start', { method: 'POST' });
        window.SESSION_ID = s.session_id;
        document.getElementById('kpi_year').textContent = `Year ${s.year}`;
        document.getElementById('kpi_remaining').textContent = `${yen(s.year_budget_remaining)} å††`;
        document.getElementById('period_label').textContent = `${s.year}å¹´ç›® 1æœˆ`;
        document.getElementById('overview_content').innerHTML = '<span class="muted">ä»Šæœˆã®äº‹æ¥­ã‚’å–å¾—ã‚’æŠ¼ã—ã¦ãã ã•ã„</span>';
        // reset gating for actual view
        window.CURRENT_EVENT_ID = null;
        window.ALLOCATED_EVENT_ID = null;
        const actualBox = document.getElementById('actual_month_box');
        if (actualBox) actualBox.textContent = '';
      } catch (e) {
        alert('ã‚²ãƒ¼ãƒ é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    }

    async function refreshMe(){
      if (!window.SESSION_ID) return;
      try {
        const m = await api(`/v1/state/me?session_id=${encodeURIComponent(window.SESSION_ID)}`);
        document.getElementById('kpi_year').textContent = `Year ${m.year}`;
        document.getElementById('kpi_remaining').textContent = `${yen(m.year_budget_remaining)} å††`;
      } catch {}
    }

    async function nextEventServer(){
      if (!window.SESSION_ID) { alert('å…ˆã«ã‚²ãƒ¼ãƒ é–‹å§‹ã‚’æŠ¼ã—ã¦ãã ã•ã„'); return; }
      const box = document.getElementById('overview_content');
      box.innerHTML = 'loading...';
      try {
        const ev = await api(`/v1/events/next?session_id=${encodeURIComponent(window.SESSION_ID)}`);
        const meta = ev.meta || {};
        window.CURRENT_EVENT_ID = ev['äºˆç®—äº‹æ¥­ID'];
        window.ALLOCATED_EVENT_ID = null;
        const actualBox = document.getElementById('actual_month_box');
        if (actualBox) actualBox.textContent = '';
        document.getElementById('period_label').textContent = `${ev.year}å¹´ç›® ${ev.month_in_year}æœˆ`;
        let html = '';
        html += `<div class="headline">${meta['äº‹æ¥­å'] ?? ''}</div>`;
        const kadai = (meta['ç¾çŠ¶ãƒ»èª²é¡Œ'] ?? '').replace(/\n/g,'<br>');
        html += `<div><h3>èª²é¡Œï¼ˆç¾çŠ¶ãƒ»èª²é¡Œï¼‰</h3><div class="code">${kadai}</div></div>`;
        box.innerHTML = html;
      } catch (e) {
        if (e && e.status === 409) {
          // å¹´åº¦çµ‚äº†ã€‚æ¬¡å¹´åº¦ã¸é€²ã‚€å°ç·šã‚’è¡¨ç¤º
          box.innerHTML = '<div class="muted">ã“ã®å¹´åº¦ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯çµ‚äº†ã—ã¾ã—ãŸã€‚</div>' +
            '<div class="actions" style="margin-top:8px">' +
            '<button class="btn btn-secondary" onclick="goNextYear()">æ¬¡å¹´åº¦ã¸é€²ã‚€</button>' +
            '</div>';
        } else {
          box.innerHTML = `error: ${e.status || ''}`;
        }
      }
    }

    async function goNextYear(){
      if (!window.SESSION_ID) { alert('å…ˆã«ã‚²ãƒ¼ãƒ é–‹å§‹ã‚’æŠ¼ã—ã¦ãã ã•ã„'); return; }
      try {
        const res = await api('/v1/state/next_year', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ session_id: window.SESSION_ID })
        });
        // KPIæ›´æ–°
        document.getElementById('kpi_year').textContent = `Year ${res.moved_to_year}`;
        document.getElementById('kpi_remaining').textContent = `${yen(res.year_budget_remaining)} å††`;
        // è¡¨ç¤ºã‚’åˆæœŸåŒ–ã—ã¦æ–°å¹´åº¦1æœˆã®ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—
        const box = document.getElementById('overview_content');
        box.innerHTML = '<span class="muted">æ–°å¹´åº¦ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—ã—ã¦ã„ã¾ã™...</span>';
        // 1æœˆã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—
        await nextEventServer();
      } catch (e) {
        alert('æ¬¡å¹´åº¦ã¸ã®é·ç§»ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    }

    async function allocateBudget(){
      if (!window.SESSION_ID || !window.CURRENT_EVENT_ID) { alert('ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—ã—ã¦ãã ã•ã„'); return; }
      const amt = parseFloat(document.getElementById('alloc_input')?.value || '0');
      if (!(amt > 0)) { alert('å‰²å½“é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
      try {
        const res = await api('/v1/allocate', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ session_id: window.SESSION_ID, event_id: String(window.CURRENT_EVENT_ID), allocated_budget: amt })
        });
        document.getElementById('kpi_remaining').textContent = `${yen(res.year_budget_remaining)} å††`;
        window.ALLOCATED_EVENT_ID = window.CURRENT_EVENT_ID;
        alert('å‰²å½“ã‚’ä¿å­˜ã—ã¾ã—ãŸ');
      } catch (e) {
        alert('å‰²å½“ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + (e.data?.detail || ''));
      }
    }

    async function openProjectDetail(budgetId){
      const modal = document.getElementById('detail_modal');
      const body = document.getElementById('detail_body');
      const title = document.getElementById('detail_title');
      body.innerHTML = 'loading...';
      let m = null;
      try {
        if (budgetId) {
          m = await api(`/v1/events/meta?budget_id=${encodeURIComponent(budgetId)}`);
        } else {
          throw new Error('no id');
        }
      } catch (e) {}
      try {
        if (!m) throw new Error('not found');
        title.textContent = m['äº‹æ¥­å'] ?? m['jigyo_mei'] ?? 'è©³ç´°';
        const gaiyo = (m['äº‹æ¥­ã®æ¦‚è¦'] ?? m['jigyo_no_gaiyo'] ?? '');
        const mokuteki = (m['ç¾çŠ¶ãƒ»èª²é¡Œ'] ?? m['genjo_kadai'] ?? '');
        const url = (m['äº‹æ¥­æ¦‚è¦URL'] ?? '');
        let html = '';
        html += `<div class="detail-row"><strong>ç›®çš„/èª²é¡Œ</strong><p>${(mokuteki||'').replace(/\n/g,'<br>')}</p></div>`;
        html += `<div class="detail-row"><strong>äº‹æ¥­ã®æ¦‚è¦</strong><p>${(gaiyo||'').replace(/\n/g,'<br>')}</p></div>`;
        if (url) html += `<div class="detail-row"><strong>å‚è€ƒURL</strong><p><a href="${url}" target="_blank" rel="noopener">${url}</a></p></div>`;
        body.innerHTML = html;
        modal.classList.add('show');
      } catch (e) {
        body.innerHTML = 'å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ';
        modal.classList.add('show');
      }
    }

    function closeDetail(){
      const modal = document.getElementById('detail_modal');
      if (modal) modal.classList.remove('show');
    }

    function predictFromInputs(){
      const g = (document.getElementById('input_gaiyo')?.value || '').trim();
      const text = g;
      const q = document.getElementById('query_text');
      if (q) q.value = text;
      predictText();
    }

    async function showActualThisMonth(){
      const box = document.getElementById('actual_month_box');
      if (!box) return;
      if (!window.CURRENT_EVENT_ID || window.ALLOCATED_EVENT_ID !== window.CURRENT_EVENT_ID) {
        alert('ä»Šã¯è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ï¼ˆã“ã®æœˆã®äº‹æ¥­ã«äºˆç®—ã‚’å‰²ã‚Šå½“ã¦ã¦ãã ã•ã„ï¼‰');
        return;
      }
      box.textContent = 'loading actual...';
      try{
        const curId = String(window.CURRENT_EVENT_ID);
        const meta = await api(`/v1/events/meta?budget_id=${encodeURIComponent(curId)}`);
        const actualInit = meta['å½“åˆäºˆç®—'] ?? meta['tosho_yosan'];
        const actualName = meta['äº‹æ¥­å'] ?? meta['jigyo_mei'] ?? '';
        box.innerHTML = `
<section class="summary-kpi-section">
  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="kpi-icon">ğŸ“Œ</div>
      <div class="kpi-content">
        <h3>ä»Šæœˆã®å½“åˆäºˆç®—</h3>
        <div class="kpi-value">${yen(actualInit)} å††</div>
      </div>
    </div>
  </div>
</section>
<div class="muted">äº‹æ¥­å: ${actualName}</div>`;
      }catch(e){
        box.textContent = 'å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ';
      }
    }

    async function resetOverview(){
      try { localStorage.removeItem(S_KEY); } catch {}
      await loadOverview();
      // Re-enable next button just in case
      const btn = document.getElementById('btn_next_overview');
      if (btn) btn.disabled = false;
    }
  </script>
</head>
<body onload="loadOverview()">
  <header class="header">
    <div class="header-content">
      <div class="app-title">Policy Game</div>
      <div class="header-actions">
        <button class="btn btn-outline" onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
        <button class="btn btn-outline" onclick="nextEventServer()">ä»Šæœˆã®äº‹æ¥­ã‚’å–å¾—</button>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="two-column-layout">
      <section id="leftpane" class="card">
        <div class="card-title">ä»Šæœˆã®äº‹æ¥­</div>
        <div class="actions">
          <span class="muted" id="period_label"></span>
        </div>
        <div id="overview_content" class="result"></div>
        <div class="card-title" style="margin-top:14px">å…¥åŠ›</div>
        <div class="project-form">
          <div class="form-group">
            <label for="input_gaiyo">äº‹æ¥­ã®æ¦‚è¦</label>
            <textarea id="input_gaiyo" rows="6" placeholder="äº‹æ¥­ã®æ¦‚è¦ã‚’å…¥åŠ›"></textarea>
          </div>
          <div class="form-group">
            <label for="alloc_input">ã“ã®äº‹æ¥­ã¸ã®å‰²å½“é¡ï¼ˆå††ï¼‰</label>
            <input type="number" id="alloc_input" placeholder="ä¾‹: 5000000000" />
          </div>
          <div class="form-actions">
            <button class="btn btn-primary" onclick="predictFromInputs()">ã“ã®å†…å®¹ã§äºˆæ¸¬</button>
            <button class="btn btn-secondary" onclick="allocateBudget()">ã“ã®äº‹æ¥­ã«å‰²å½“</button>
          </div>
        </div>
        <input type="hidden" id="query_text" />
      </section>
      <section id="rightpane" class="card">
        <div class="card-title">äºˆç®—æ¨å®šãƒ»é¡ä¼¼äº‹æ¥­</div>
        <section class="summary-kpi-section">
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-icon">ğŸ“…</div>
              <div class="kpi-content">
                <h3>å¹´åº¦</h3>
                <div class="kpi-value" id="kpi_year">-</div>
              </div>
            </div>
            <div class="kpi-card">
              <div class="kpi-icon">ğŸ’µ</div>
              <div class="kpi-content">
                <h3>å¹´åº¦æ®‹é¡</h3>
                <div class="kpi-value" id="kpi_remaining">- å††</div>
              </div>
            </div>
          </div>
        </section>
        <div class="actions" style="margin:8px 0">
          <button class="btn small" id="btn_show_actual" onclick="showActualThisMonth()">ä»Šæœˆã®äº‹æ¥­ã®å½“åˆäºˆç®—ã‚’ç¢ºèª</button>
          <span id="actual_month_box" class="muted" style="margin-left:8px"></span>
        </div>
        <div id="pred" class="projects-list"></div>
      </section>
    </div>

    <!-- è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="detail_modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="detail_title">è©³ç´°</h3>
          <button class="modal-close" onclick="closeDetail()">Ã—</button>
        </div>
        <div class="modal-body" id="detail_body"></div>
      </div>
    </div>

    
  </main>

  <footer class="site-footer">
    <div class="container">
      <span class="muted">Â© Policy Game Demo</span>
    </div>
  </footer>
</body>
</html>
